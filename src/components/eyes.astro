<script>
  document.addEventListener("mousemove", (e) => {
    eyesFollow(e.clientX, e.clientY);
  });

  function eyeBlink() {
    const delay = (ms) => new Promise((res) => setTimeout(res, ms));

    document.querySelectorAll("[data-eyes-closed]").forEach(async (back) => {
      while (true) {
        back.style.display = "inherit";
        await delay(100);
        back.style.display = "none";
        await delay(2500);
      }
    })
  }
  eyeBlink()

  function eyesFollow(x, y) {
    const pupils = document.querySelectorAll("[data-pupil]").forEach((pupil) => {
      const pupilBox = pupil.getBoundingClientRect();

      const diffX = pupilBox.right - (pupilBox.right - pupilBox.left) / 2 - x;
      let offsetX = 0;
      if (diffX > 18) {
        offsetX = -4;
      } else if (diffX > 5) {
        offsetX = -2;
      } else if (diffX < -18) {
        offsetX = 4;
      } else if (diffX < -5) {
        offsetX = 2;
      }
      offsetX -= 18;

      const diffY = pupilBox.top - (pupilBox.top - pupilBox.bottom) / 2 - y + 6;
      let offsetY = -1;
      if (diffY > 1) {
        offsetY = -2;
      } else if (diffY < -1) {
        offsetY = 0;
      }

      pupil.style.transform = "translate(" + offsetX + "px, " + offsetY + "px)";
    })
  }
</script>

<div style="height: 16px;">
  <img src="eyes-back.png" class="eyes" />
  <img src="eyes-pupil.png" class="eyes" data-pupil />
  <img src="eyes-close.png" class="eyes" data-eyes-closed />
</div>
